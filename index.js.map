{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// js/pixabay-api.js\nimport axios from 'axios';\n\nconst API_KEY = '19396225-c483f75d28f30d4068a3a7270'; // <-- Замініть на свій ключ\nconst BASE_URL = 'https://pixabay.com/api/';\n\n/**\n * Виконує HTTP-запит до Pixabay API для отримання зображень за пошуковим запитом.\n * @param {string} query - Пошукове слово.\n * @returns {Promise<Object>} - Проміс, що повертає властивість data з відповіді Axios.\n */\nexport async function getImagesByQuery(query) {\n    // Параметри запиту\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        // Повертаємо властивість data з відповіді (містить hits та total/totalHits)\n        return response.data; \n    } catch (error) {\n        console.error(\"Error fetching images from Pixabay:\", error);\n        // Викидаємо помилку, щоб її обробив caller (main.js)\n        throw new Error(\"Failed to fetch images.\"); \n    }\n}","// js/render-functions.js\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryElement = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('#loader');\n\n// Створення екземпляра SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt', // Використовувати alt як підпис\n    captionDelay: 250,\n});\n\n/**\n * Створює HTML-розмітку для картки зображення.\n * @param {Object} image - Об'єкт зображення з Pixabay API.\n * @returns {string} - Рядок HTML-розмітки.\n */\nfunction createImageCardMarkup({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n        <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\" alt=\"${tags}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n            </div>\n        </li>\n    `;\n}\n\n/**\n * Створює HTML-розмітку для галереї, додає її в контейнер та оновлює SimpleLightbox.\n * @param {Array<Object>} images - Масив об'єктів зображень.\n */\nexport function createGallery(images) {\n    if (!galleryElement) return;\n\n    const markup = images.map(createImageCardMarkup).join('');\n    galleryElement.insertAdjacentHTML('beforeend', markup);\n\n    // Оновлення SimpleLightbox після додавання нових елементів\n    lightbox.refresh(); \n}\n\n/**\n * Очищує вміст контейнера галереї.\n */\nexport function clearGallery() {\n    if (galleryElement) {\n        galleryElement.innerHTML = '';\n    }\n}\n\n/**\n * Додає клас для відображення лоадера.\n */\nexport function showLoader() {\n    if (loaderElement) {\n        // Припустимо, що клас 'is-visible' робить лоадер видимим\n        loaderElement.classList.add('is-visible'); \n    }\n}\n\n/**\n * Прибирає клас для приховування лоадера.\n */\nexport function hideLoader() {\n    if (loaderElement) {\n        loaderElement.classList.remove('is-visible');\n    }\n}","// js/main.js\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader } from './js/render-functions.js';\n\n// Імпорт стилів для iziToast\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst searchInput = form.elements['search-text']; // Доступ до поля вводу за його атрибутом name\n\n/**\n * Відображає повідомлення про помилку за допомогою iziToast.\n * @param {string} message - Текст повідомлення.\n */\nfunction showErrorMessage(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#fff',\n        titleColor: '#fff',\n    });\n}\n\n/**\n * Обробник події сабміту форми.\n * @param {Event} event - Об'єкт події.\n */\nasync function handleSearch(event) {\n    event.preventDefault(); // Запобігаємо стандартній відправці форми\n\n    const query = searchInput.value.trim();\n\n    // 1. Перевірка на порожній рядок\n    if (query === \"\") {\n        showErrorMessage(\"Please enter a search query.\");\n        return;\n    }\n\n    // 2. Очищення галереї перед новим пошуком\n    clearGallery(); \n    \n    // 3. Відображення лоадера\n    showLoader(); \n\n    try {\n        // 4. Виконання HTTP-запиту\n        const data = await getImagesByQuery(query);\n        const images = data.hits;\n\n        // 5. Перевірка на порожній масив\n        if (images.length === 0) {\n            showErrorMessage(\"Sorry, there are no images matching your search query. Please try again!\");\n            clearGallery(); // Гарантуємо, що галерея порожня\n        } else {\n            // 6. Створення та відображення галереї\n            createGallery(images);\n        }\n    } catch (error) {\n        // Обробка помилок запиту\n        console.error(error);\n        showErrorMessage(\"An error occurred while fetching images. Please try again later.\");\n    } finally {\n        // 7. Приховування лоадера\n        hideLoader();\n        // 8. Очищення поля вводу\n        form.reset(); \n    }\n}\n\n// Додавання слухача події сабміту на форму\nform.addEventListener('submit', handleSearch);"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","params","axios","error","galleryElement","loaderElement","lightbox","SimpleLightbox","createImageCardMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createGallery","images","markup","clearGallery","showLoader","hideLoader","form","searchInput","showErrorMessage","message","iziToast","handleSearch","event"],"mappings":"owBAGA,MAAMA,EAAU,qCACVC,EAAW,2BAOV,eAAeC,EAAiBC,EAAO,CAE1C,MAAMC,EAAS,CACX,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,EAEI,GAAI,CAGA,OAFiB,MAAME,EAAM,IAAIJ,EAAU,CAAE,OAAAG,CAAM,CAAE,GAErC,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,sCAAuCA,CAAK,EAEpD,IAAI,MAAM,yBAAyB,CAC5C,CACL,CC1BA,MAAMC,EAAiB,SAAS,cAAc,UAAU,EAClDC,EAAgB,SAAS,cAAc,SAAS,EAGhDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAOD,SAASC,EAAsB,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CACrG,MAAO;AAAA;AAAA,uBAEYL,CAAa,+BAA+BC,CAAI;AAAA,4BAC3CF,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,oDAGFC,CAAK;AAAA,oDACLC,CAAK;AAAA,uDACFC,CAAQ;AAAA,wDACPC,CAAS;AAAA;AAAA;AAAA,KAIjE,CAMO,SAASC,EAAcC,EAAQ,CAClC,GAAI,CAACb,EAAgB,OAErB,MAAMc,EAASD,EAAO,IAAIT,CAAqB,EAAE,KAAK,EAAE,EACxDJ,EAAe,mBAAmB,YAAac,CAAM,EAGrDZ,EAAS,QAAO,CACpB,CAKO,SAASa,GAAe,CACvBf,IACAA,EAAe,UAAY,GAEnC,CAKO,SAASgB,GAAa,CACrBf,GAEAA,EAAc,UAAU,IAAI,YAAY,CAEhD,CAKO,SAASgB,GAAa,CACrBhB,GACAA,EAAc,UAAU,OAAO,YAAY,CAEnD,CClEA,MAAMiB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAcD,EAAK,SAAS,aAAa,EAM/C,SAASE,EAAiBC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,WAAY,MACpB,CAAK,CACL,CAMA,eAAeE,EAAaC,EAAO,CAC/BA,EAAM,eAAc,EAEpB,MAAM5B,EAAQuB,EAAY,MAAM,KAAI,EAGpC,GAAIvB,IAAU,GAAI,CACdwB,EAAiB,8BAA8B,EAC/C,MACH,CAGDL,IAGAC,IAEA,GAAI,CAGA,MAAMH,GADO,MAAMlB,EAAiBC,CAAK,GACrB,KAGhBiB,EAAO,SAAW,GAClBO,EAAiB,0EAA0E,EAC3FL,KAGAH,EAAcC,CAAM,CAE3B,OAAQd,EAAO,CAEZ,QAAQ,MAAMA,CAAK,EACnBqB,EAAiB,kEAAkE,CAC3F,QAAc,CAENH,IAEAC,EAAK,MAAK,CACb,CACL,CAGAA,EAAK,iBAAiB,SAAUK,CAAY"}